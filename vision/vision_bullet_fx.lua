local function a(b,c,d,...)if not b then error(string.format(d,...),c)end end;local e={rage={"aimbot","other"},aa={"anti-aimbot angles","fake lag","other"},legit={"weapon type","aimbot","triggerbot","other"},visuals={"player esp","other esp","colored models","effects"},misc={"miscellaneous","settings","lua","other"},skins={"weapon skin","knife options","glove options"},config={"presets","lua"},players={"players","adjustments"},lua={"a","b"}}for f,g in pairs(e)do e[f]={}for h=1,#g do e[f][g[h]]=true end end;local i={}local j={__index=i}function j.__call(k,...)local l={...}if#l==0 then return k:get()end;local m={pcall(k.set,k,unpack(l))}a(m[1],4,m[2])return k end;function i.new(n,f,o,p,...)local q;local r=false;if type(n)=="function"then local s={pcall(n,f,o,p,...)}a(s[1],4,"Cannot create menu item because: %s",s[2])q=s[2]else q=n;r=true end;return setmetatable({tab=f,container=o,name=p,reference=q,visible=true,hidden_value=nil,children={},ui_callback=nil,callbacks={},is_menu_reference=r,getter={callback=nil,data=nil},setter={callback=nil,data=nil},parent_value_or_callback=nil},j)end;function i:set_hidden_value(t)self.hidden_value=t end;function i:set(...)local l={...}if self.setter.callback~=nil then l=self.setter.callback(unpack(l))end;local m={pcall(ui.set,self.reference,unpack(l))}a(m[1],3,"Cannot set values of menu item because: %s",m[2])end;function i:get()if self.visible==false and self.hidden_value~=nil then return self.hidden_value end;local u={ui.get(self.reference)}if self.getter.callback~=nil then return self.getter.callback(u)end;return unpack(u)end;function i:set_setter_callback(v,w)a(type(v)=="function",3,"Cannot set menu item setter callback: argument must be a function.")self.setter.callback=v;self.setter.data=w end;function i:set_getter_callback(v,w)a(type(v)=="function",3,"Cannot set menu item getter callback: argument must be a function.")self.getter.callback=v;self.getter.data=w end;function i:add_children(x,y)if y==nil then y=true end;if getmetatable(x)==j then x={x}end;for z,A in pairs(x)do a(getmetatable(A)==j,3,"Cannot add child to menu item: children must be menu item objects. Make sure you are not trying to parent a UI reference.")a(A.reference~=self.reference,3,"Cannot parent a menu item to iself.")A.parent_value_or_callback=y;self.children[A.reference]=A end;i._process_callbacks(self)end;function i:add_callback(v)a(self.is_menu_reference==false,3,"Cannot add callbacks to built-in menu items.")a(type(v)=="function",3,"Callbacks for menu items must be functions.")table.insert(self.callbacks,v)i._process_callbacks(self)end;function i._process_callbacks(k)local v=function()for z,A in pairs(k.children)do local B;if type(A.parent_value_or_callback)=="function"then B=A.parent_value_or_callback()else B=k:get()==A.parent_value_or_callback end;local C=B==true and k.visible==true;A.visible=C;ui.set_visible(A.reference,C)if A.ui_callback~=nil then A.ui_callback()end end;for h=1,#k.callbacks do k.callbacks[h]()end end;ui.set_callback(k.reference,v)k.ui_callback=v;v()end;local D={}local E={__index=D}function D.new(f,o)D._validate_tab_container(f,o)return setmetatable({tab=f,container=o,children={}},E)end;function D:save_to_db()local F=string.format("%s_%s",self.tab,self.container)for z,k in pairs(self.children)do local G=string.format("%s_%s",F,k.name)local w={k()}database.write(G,w)end end;function D:load_from_db()local F=string.format("%s_%s",self.tab,self.container)for z,k in pairs(self.children)do local G=string.format("%s_%s",F,k.name)local w=database.read(G)if w~=nil then k(unpack(w))end end end;function D:parent_all_to(k,y)local x=self.children;x[k.reference]=nil;k:add_children(x,y)end;function D.reference(f,o,p)D._validate_tab_container(f,o)local H={pcall(ui.reference,f,o,p)}a(H[1],3,"Cannot reference Gamesense menu item because: %s",H[2])local I={select(2,unpack(H))}local J={}for h=1,#I do table.insert(J,i.new(I[h],f,o,p))end;return unpack(J)end;function D:checkbox(p)return self:_create_item(ui.new_checkbox,p)end;function D:slider(p,K,L,M,N,O,P,Q)if type(M)=="table"then local R=M;M=R.default;N=R.show_tooltip;O=R.unit;P=R.scale;Q=R.tooltips end;M=M or nil;N=N or true;O=O or nil;P=P or 1;Q=Q or nil;a(type(K)=="number",3,"Slider min value must be a number.")a(type(L)=="number",3,"Slider max value must be a number.")a(K<L,3,"Slider min value must be below the max value.")if M~=nil then a(M>=K and M<=L,3,"Slider default must be between min and max values.")end;return self:_create_item(ui.new_slider,p,K,L,M,N,O,P,Q)end;function D:combobox(p,...)local l={...}if type(l[1])=="table"then l=l[1]end;return self:_create_item(ui.new_combobox,p,l)end;function D:multiselect(p,...)local l={...}if type(l[1])=="table"then l=l[1]end;return self:_create_item(ui.new_multiselect,p,l)end;function D:hotkey(p,S)if S==nil then S=false end;a(type(S)=="boolean",3,"Hotkey inline argument must be a boolean.")return self:_create_item(ui.new_hotkey,p,S)end;function D:button(p,v)a(type(v)=="function",3,"Cannot set button callback because the callback argument must be a function.")return self:_create_item(ui.new_button,p,v)end;function D:color_picker(p,T,U,V,W)T=T or 255;U=U or 255;V=V or 255;W=W or 255;a(type(T)=="number"and T>=0 and T<=255,3,"Cannot set color picker red channel value. It must be between 0 and 255.")a(type(U)=="number"and U>=0 and U<=255,3,"Cannot set color picker green channel value. It must be between 0 and 255.")a(type(V)=="number"and V>=0 and V<=255,3,"Cannot set color picker blue channel value. It must be between 0 and 255.")a(type(W)=="number"and W>=0 and W<=255,3,"Cannot set color picker alpha channel value. It must be between 0 and 255.")return self:_create_item(ui.new_color_picker,p,T,U,V,W)end;function D:textbox(p)return self:_create_item(ui.new_textbox,p)end;function D:listbox(p,...)local l={...}if type(l[1])=="table"then l=l[1]end;local k=self:_create_item(ui.new_listbox,p,l)k:set_getter_callback(function(u)return k.getter.data[u+1]end,l)return k end;function D:label(p)a(type(p)=="string","Label name must be a string.")return self:_create_item(ui.new_label,p)end;function D:_create_item(n,p,...)a(type(p)=="string"and p~="",3,"Cannot create menu item: name must be a non-empty string.")local k=i.new(n,self.tab,self.container,p,...)self.children[k.reference]=k;return k end;function D._validate_tab_container(f,o)a(type(f)=="string"and f~="",4,"Cannot create menu manager: tab name must be a non-empty string.")a(type(o)=="string"and o~="",4,"Cannot create menu manager: tab name must be a non-empty string.")f=f:lower()a(e[f]~=nil,4,"Cannot create menu manager: tab name does not exist.")a(e[f][o:lower()]~=nil,4,"Cannot create menu manager: container name does not exist.")end;local X=D.new("config","presets")X:label("--------------------------------------------------")X:label("Bullet FX - v1.0.2-beta")local Y=X:checkbox("Enable Bullet FX")(true)local Z=false;local _=X:checkbox("Player FX")_:add_callback(function()Z=_()end)local a0=X:color_picker("Player color",0,255,0)local a1=X:color_picker("Teammate color",0,0,255)local a2=X:color_picker("Enemy color",255,0,0)local a3=false;local a4=X:checkbox("Teammate FX")a4:add_callback(function()a3=a4()end)local a5=false;local a6=X:checkbox("Enemy FX")a6:add_callback(function()a5=a6()end)local a7=X:checkbox("Enable tracer")local a8=0;local a9=X:slider("Tracer segmentation",1,10,{default=2,scale=0.01})a9:add_callback(function()a8=a9()*0.01 end)local aa=0;local ab=X:slider("Impact splash count",10,60,{default=15})ab:add_callback(function()aa=ab()end)local ac=false;local ad=X:checkbox("Sticky impact splash")ad:add_callback(function()ac=ad()end)Y:add_children({_,a0,a4,a1,a6,a2,a7,ab,ad})a7:add_children({a9})X:load_from_db()local ae=package.vel_hook("tracer fx")client.set_event_callback("bullet_impact",function(w)if Y()==false or ae:available()==false then return end;local af=client.userid_to_entindex(w.userid)local ag=ae.vector(entity.get_prop(af,"m_vecOrigin"))local ah=ae.vector(w.x,w.y,w.z)local ai=entity.get_prop(af,"m_flDuckAmount")ag.z=ag.z+46+(1-ai)*18;local aj={0,0,0}if af==entity.get_local_player()then if Z==false then return end;aj={a0()}elseif entity.is_enemy(af)==true then if a5==false then return end;aj={a2()}elseif entity.is_enemy(af)==false then if a3==false then return end;aj={a1()}end;if a7()==true then local ak=ah:distance(ag)local al=ag:segment_ray(ah,ak*a8)for h,am in pairs(al)do if h>2 then local an=ae:create()an.origin=am:clone_offset(client.random_float(-2,2),client.random_float(-2,2),0)an.shader=ae.shader.rgb(aj[1],aj[2],aj[3],client.random_int(10,255),false)an.type="circle"an.radius=1.33;an.timer=ae.timer_standard(true)an.fade_time=0.5;an.fade_speed=client.random_float(1,2)an.target_vector=ae.vector(client.random_float(-0.2,0.2),client.random_float(-0.2,0.2),client.random_float(0,-0.1))an.on_frame=function()an:kill_invisible()an.shader:fade_out(an.fade_speed*ae.simulation.delta)an.timer:event(0.1,function()an.target_vector(client.random_float(-0.1,0.1),client.random_float(-0.1,0.1),client.random_float(-0.05,-0.15))an.timer:restart()end)an.origin=an.origin+an.target_vector*ae.simulation.delta end end end end;local ao=ae.shared.player_camera_angles:to_backward_vector()*10;ah=ah+ao;for z=1,aa do local ap=ae:create()ap.origin=ah;ap.shader=ae.shader.rgb(aj[1],aj[2],aj[3],client.random_int(10,255),false)ap.speed=client.random_float(0.5,1.5)ap.type="circle"ap.radius=4;ap.fade_time=1;ap.fade_speed=client.random_float(0.1,0.2)ap.target_vector=ae.vector(client.random_float(-1,1),client.random_float(-1,1),client.random_float(-1,2))if ac==true then ap.stuck=false;ap.impact_z=-32768;ap.timer=ae.timer_standard(true)ap.on_frame=function()ap:kill_invisible()if ap.stuck==false then if ap.origin.z<=ap.impact_z and ap.timer()>0.1 then ap.stuck=true;ap:kill()end;local aq=ae.vector(0,0,-32768)local ar=ap.origin:trace_line_to(ap.origin+aq)ap.impact_z=ap.origin.z+-32768*ar+4;ap.target_vector.z=ap.target_vector.z-0.033*ae.simulation.delta;ap.origin=ap.origin+ap.target_vector*ae.simulation.delta end end else ap.on_frame=function()ap:kill_invisible()ap.shader:fade_out(2*ae.simulation.delta)ap.target_vector.z=ap.target_vector.z-0.033*ae.simulation.delta;ap.origin=ap.origin+ap.target_vector*ae.simulation.delta end end end end)client.set_event_callback("shutdown",function()X:save_to_db()end)
